X = load('memoized_features/time_Q=08_train.mat');

%%
X_features = X.X_features;
X_features = cat(1, X_features{:}).';
[nAzimuths, nExamples] = size(X_features);
X_features = cat(3, X_features{:});
X_features = reshape(X_features, [ ...
    size(X_features, 1), ...
    size(X_features, 2), ...
    nAzimuths, ...
    nExamples]);

%%
X_scattergrams = X.X_scattergrams;
X_scattergrams = cat(1, X_scattergrams{:}).';
[nAzimuths, nExamples] = size(X_scattergrams);
X_scattergrams = cat(4, X_scattergrams{:});
X_scattergrams = reshape(X_scattergrams, [ ...
    size(X_scattergrams, 1), ...
    size(X_scattergrams, 2), ...
    size(X_scattergrams, 3), ...
    nAzimuths, ...
    nExamples]);

%%
class_names = ...
    {'bus', 'busystreet', 'office', 'openairmarket', 'park', ...
    'quietstreet', 'restaurant', 'supermarket', 'tube', 'tubestation'};

%%
filename = 'time_Q=08.h5';
data = struct( ...
    'X_features_train', X_features_train, ...
    'X_features_test', X_features_test, ...
    'X_scattergrams_train', X_scattergrams_train, ...
    'X_scattergrams_test', X_scattergrams_test, ...
    'Y_train', Y_train, ...
    'Y_test', Y_test);